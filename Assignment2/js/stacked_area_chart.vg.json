{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "title": {"text": "Generation Of Suicidal Victims", "anchor": "middle"},
  "data": {
    "url": "https://raw.githubusercontent.com/AnabellChiew/FIT3179-testrepo/main/Assignment2/data/suicideRateByGenerationYear.csv"
  },
  "vconcat": [
    {
      "encoding": {
        "color": {
          "condition": {
            "selection": "brush",
            "title": "Generation Type",
            "field": "generation",
            "type": "nominal",
            "scale": {
              "domain": ["Boomers", "G.I. Generation", "Generation X", "Generation Z", "Millenials","Silent"],
              "scheme": "tableau20"
            }
          },
          "value": "lightgray"
        },
        "x": {
          "scale": {"padding": 0.2},
          "field": "year",
          "axis": {"title": "Year", "labelAngle": 0}
        },
        "y": {
          "aggregate": "sum",
          "field": "suicide rate",
          "title": "Suicide Rate"
        }
      },
      "width": 600,
      "height": 300,
      "mark": {"type": "area", "tooltip": true},
      "selection": {"brush": {"encodings": ["x"], "type": "interval"}},
      "transform": [{"filter": {"selection": "click"}}]
    },
    {
      "layer":[
      {
        "encoding": {
          "color": {
            "condition": {
              "selection": "click",
              "field": "generation",
              "scale": {
                "domain": ["Boomers", "G.I. Generation", "Generation X", "Generation Z", "Millenials","Silent"]
              }
            },
            "value": "lightgray"
          },
          "x": {
            "aggregate": "sum",
            "field": "suicide rate",
            "title": "Suicide Rate",
            "axis": {"grid": false}
          },
          "y": {"title": "Generation", 
           "sort": "-x", "field": "generation"}
        },
        "width": 600,
        "mark": {"type": "bar", "tooltip": true},
        "selection": {"click": {"encodings": ["color"], "type": "multi"}},
        "transform": [{"filter": {"selection": "brush"}}]
      },
      {
      "mark": {
            "type": "text",
            "align": "left",
            "dx": 100,
            "dy": 10,
            "text": ["Silent Generation has the","highest suicide rate"],
            "fontSize": 12
          },
      "encoding": {
        "color": {"value": "grey"},
        "opacity":{
          "condition": {"test": "datum['year'] == '1990'", "value": 1},
          "value": 0
        }
      }
    }
    ]
    }
  ]
}